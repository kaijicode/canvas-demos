<!DOCTYPE html>
<html>
<head>
    <style>
        body { 
            padding: 0; 
            margin: 0;

        }

        .flex-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .flex-item {
            flex-grow: 0;
        }

        canvas { 
            background: #eee; 
            display: block; 
        }
    </style>
</head>

<body>
    <div class="flex-container">
        <canvas id="canvas" class="flex-item" width="480" height="320"></canvas>
    </div>

    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        let x = canvas.width / 2;
        let y = canvas.height / 2;

        let xSpeed = 2;
        let ySpeed = -2;
        const ballRadius = 10;

        const paddleHeight = 10;
        const paddleWidth = 75;
        let paddleX = (canvas.width - paddleWidth) / 2;
        const paddleY = canvas.height - paddleHeight;
        const paddleSpeed = 7;


        let isRightKeyPressed = false;
        let isLeftKeyPressed = false;

        document.addEventListener('keydown', handleKeyDown);
        document.addEventListener('keyup', handleKeyUp);

        function drawBall(x, y, radius) {
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI*2);
            ctx.fillStyle = "#0095DD";
            ctx.fill();
            ctx.closePath();
        }

        function drawPaddle(x, y, width, height) {
            ctx.beginPath();
            ctx.rect(x, y, width, height);
            ctx.fillStyle = "#0095DD";
            ctx.fill();
            ctx.closePath();
        }


        function handleKeyDown(event) {
            switch (event.key) {
                case 'Right':
                case 'ArrowRight':
                    isRightKeyPressed = true;
                
                case 'Left':
                case 'ArrowLeft':
                    isLeftKeyPressed = true;

                default:
                    break;
            }
        }

        function handleKeyUp(event) {
            switch (event.key) {
                case 'Right':
                case 'ArrowRight':
                    isRightKeyPressed = false;
                
                case 'Left':
                case 'ArrowLeft':
                    isLeftKeyPressed = false;

                default:
                    break;
            }
        }
 
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            drawBall(x, y, ballRadius);
            drawPaddle(paddleX, paddleY, paddleWidth, paddleHeight);

            // if collides with top wall or bottom wall
            if (y - ballRadius <= 0 || y + ballRadius >= canvas.height) {
                ySpeed = -ySpeed;
            }

            // if collides with left wall or right wall
            if (x + ballRadius >= canvas.width || x - ballRadius <= 0) {
                xSpeed = -xSpeed;
            }

            x += xSpeed;
            y += ySpeed;

            if (isRightKeyPressed) {
                paddleX += paddleSpeed;
                if (paddleX + paddleWidth > canvas.width) {
                    paddleX = canvas.width - paddleWidth;
                }
            } else if (isLeftKeyPressed) {
                paddleX -= paddleSpeed;
                if (paddleX < 0) {
                    paddleX = 0;
                }
            }
        }

        setInterval(draw, 10);
    </script>
</body>
</html>