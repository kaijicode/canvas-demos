<!DOCTYPE html>
<html>
<head>
    <style>
        body { 
            padding: 0; 
            margin: 0;

        }

        .flex-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .flex-item {
            flex-grow: 0;
        }

        canvas { 
            background: #eee; 
            display: block; 
        }
    </style>
</head>

<body>
    <div class="flex-container">
        <canvas id="canvas" class="flex-item" width="480" height="320"></canvas>
    </div>

    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        const colors = [
            '#f44336',
            '#E91E63',
            '#9C27B0',
            '#673AB7',
            '#3F51B5',
            '#2196F3',
            '#03A9F4',
            '#00BCD4',
            '#009688',
            '#4CAF50',
            '#8BC34A',
            '#CDDC39',
            '#FFEB3B',
            '#FFC107',
            '#FF9800',
            '#FF5722',
            '#795548',
            '#9E9E9E',
            '#607D8B',
        ];

        const balls = [
            createBall(
                randomBetween(canvas.width * 0.1, canvas.width * 0.9), 
                randomBetween(canvas.height * 0.1, canvas.height * 0.9), 
                10, // radius
                {x: randomBetween(-2, 2), y: randomBetween(-2, 2)}, 
                colors[randomBetween(0, colors.length-1)]
            ),
        ];

        function createBall(x, y, radius, speed, color = "#0095DD") {
            return {x, y, radius, speed, color};
        }

        // random between min (inclusive) and max (inclusive)
        function randomBetween(min, max) {
            return Math.floor((Math.random() * ((max+1) - min))) + min;
        }

        function drawBall(ball) {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
            ctx.fillStyle = ball.color;
            ctx.fill();
            ctx.closePath();
        }

        function detectCollision(ballA, ballB) {

        }

        function detectWallCollision(ball) {
            const collision = {x: ball.speed.x, y: ball.speed.y};

            if (ball.y - ball.radius <= 0 || ball.y + ball.radius >= canvas.height) {
                collision.y = -collision.y;
            }

            // if collides with left wall or right wall
            if (ball.x + ball.radius >= canvas.width || ball.x - ball.radius <= 0) {
                collision.x = -collision.x;
            }

            return collision;
        }

        function applyCollision(ball, collision) {
            ball.speed = {...ball.speed, ...collision};
            ball.x += ball.speed.x;
            ball.y += ball.speed.y;
        }

        function changeBallSpeed(ball, newSpeed) {
            ball.speed = newSpeed;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            balls.forEach((ball) => {
                drawBall(ball);
                applyCollision(ball, detectWallCollision(ball));
            });

            requestAnimationFrame(draw);
        }

        draw();
    </script>
</body>
</html>